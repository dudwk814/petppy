<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/fragments/basicLayout :: setContent(~{this::content})}">
    <th:block th:fragment="content">

        <section class="hero-wrap hero-wrap-2" style="background-image: url('/petppy/images/bg_2.jpg');"
                 data-stellar-background-ratio="0.5">
            <div class="overlay"></div>
            <div class="container">
                <div aria-live="polite" aria-atomic="true" style="position: fixed; z-index: 9999; min-height: 200px;">
                    <!-- Position it -->
                    <div style="position: fixed; top: 15px; right: 15px;" class="content-section">

                    </div>
                </div>
                <div class="row no-gutters slider-text align-items-end">
                    <div class="col-md-9 ftco-animate pb-5">
                        <p class="breadcrumbs mb-2"><span class="mr-2"><a th:href="@{/}">Home <i
                                class="ion-ios-arrow-forward"></i></a></span> <span>Admin<i
                                class="ion-ios-arrow-forward"></i></span></p>
                        <h1 class="mb-0 bread">Admin</h1>
                    </div>
                </div>
            </div>
        </section>

        <section class="ftco-section bg-light">
            <div class="container">
                <div class="card-deck">
                    <div class="card text-center border-primary rounded">
                        <div class="card-body">
                            <p class="card-title text-primary">회원</p>
                            <h5>[[${userCount}]]</h5>
                        </div>
                    </div>
                    <div class="card text-center border-primary rounded">
                        <div class="card-body">
                            <p class="card-title text-primary">예약</p>
                            <h5>55</h5>
                        </div>
                    </div>
                    <div class="card text-center border-primary rounded">
                        <div class="card-body">
                            <p class="card-title text-primary">문의</p>
                            <h5>55</h5>
                        </div>
                    </div>
                </div>

                <div class="row mt-5">
                    <!--<div class="col text-center">
                        <div class="block-27">
                            <ul>
                            </ul>
                        </div>
                    </div>-->
                </div>

                <ul class="nav nav-pills nav-fill justify-content-center nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">회원</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">예약</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">문의</a>
                    </li>
                </ul>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                        <div class="row mt-5">
                        </div>
                        <div class="card-deck">

                            <div class="card text-center border-primary rounded">
                                <div class="card-body">
                                    <p class="card-title text-primary">총 회원 수</p>
                                    <h5>[[${userCount}]]</h5>
                                </div>
                            </div>

                            <div class="card text-center border-primary rounded">
                                <div class="card-body">
                                    <p class="card-title text-primary">NONE</p>
                                    <h5 class="noneCount" th:if="${NONE} != null">[[${NONE.count}]]</h5>
                                    <h5 class="noneCount" th:unless="${NONE} != null">0</h5>
                                </div>
                            </div>
                            <div class="card text-center border-primary rounded">
                                <div class="card-body">
                                    <p class="card-title text-primary">PERSONAL</p>
                                    <h5 class="personalCount" th:if="${PERSONAL} != null">[[${PERSONAL.count}]]</h5>
                                    <h5 class="personalCount" th:unless="${PERSONAL} != null">0</h5>
                                </div>
                            </div>

                            <div class="card text-center border-primary rounded">
                                <div class="card-body">
                                    <p class="card-title text-primary">BUSINESS</p>
                                    <h5 class="businessCount" th:if="${BUSINESS} != null">[[${BUSINESS.count}]]</h5>
                                    <h5 class="businessCount" th:unless="${BUSINESS} != null">0</h5>
                                </div>
                            </div>

                            <div class="card text-center border-primary rounded">
                                <div class="card-body">
                                    <p class="card-title text-primary">ULTIMATE</p>
                                    <h5 class="ultimateCount" th:if="${ULTIMATE} != null">[[${ULTIMATE.count}]]</h5>
                                    <h5 class="ultimateCount" th:unless="${ULTIMATE} != null">0</h5>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-5">
                        </div>
                        <div class="row">
                            <div class="col-sm-8">
                                <div class="card">
                                    <div class="card-header text-center">
                                        회원 차트
                                    </div>
                                    <div class="card-body">
                                        <canvas id="membershipChart1" width="400" height="200"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="card">
                                    <div class="card-header text-center">
                                        회원 차트
                                    </div>
                                    <div class="card-body">
                                        <canvas id="membershipChart2" width="400" height="300"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-5 mb-5">
                        </div>
                        <div class="row">
                            <div class="col-sm-12">
                                <div class="card-header text-center">
                                    회원 테이블
                                </div>
                                <div class="card-body">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">First</th>
                                            <th scope="col">Last</th>
                                            <th scope="col">Handle</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr>
                                            <th scope="row">1</th>
                                            <td>Mark</td>
                                            <td>Otto</td>
                                            <td>@mdo</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">2</th>
                                            <td>Jacob</td>
                                            <td>Thornton</td>
                                            <td>@fat</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">3</th>
                                            <td>Larry</td>
                                            <td>the Bird</td>
                                            <td>@twitter</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="card-footer">
                                    <nav aria-label="Page navigation">
                                        <ul class="pagination justify-content-center">
                                            <li class="page-item">
                                                <a class="page-link" href="#" aria-label="Previous">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>
                                            <li class="page-item"><a class="page-link" href="#">1</a></li>
                                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                                            <li class="page-item">
                                                <a class="page-link" href="#" aria-label="Next">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>


                        </div>
                    </div>
                    <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">...</div>
                    <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
                </div>

            </div>
        </section>
    </th:block>
</th:block>
<script th:inline="javascript">

    <!-- 각 멤버십 등급별 회원 수 카운트 -->
    const userCount = [[${userCount}]];
    const noneCount = $('.noneCount').text();
    const personalCount = $('.personalCount').text();
    const businessCount = $('.businessCount').text();
    const ultimateCount = $('.ultimateCount').text();



    // $(document).ready(function () {
    //     console.log(userCount);
    //     console.log(noneCount);
    //     console.log(personalCount);
    //     console.log(businessCount);
    //     console.log(ultimateCount)
    // });

    const membershipChart1 = new Chart($('#membershipChart1'), {
        type: 'bar',
        data: {
            labels: ['NONE', 'PERSONAL', 'BUSINESS', 'ULTIMATE'],
            datasets: [{
                label: '회원 수',
                data: [noneCount, personalCount, businessCount, ultimateCount],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    const membershipChart2 = new Chart($('#membershipChart2'), {
        type: 'doughnut',
        data: {
            labels: [
                'NONE',
                'PERSONAL',
                'BUSINESS',
                'ULTIMATE'
            ],
            datasets: [{
                label: 'My First Dataset',
                data: [noneCount, personalCount, businessCount, ultimateCount],
                backgroundColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)'
                ],
                hoverOffset: 4
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
</html>
